<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mobile Royale Survival</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  background: #222;
  color: white;
  font-family: Arial;
}

#ui {
  position: absolute;
  top: 10px;
  left: 10px;
}

button {
  padding: 5px 10px;
  margin-top: 5px;
  cursor: pointer;
}

canvas {
  background: #2e8b57;
  display: block;
}
</style>
</head>
<body>

<div id="ui">
  Vida: <span id="vida">100</span><br>
  Madeira: <span id="wood">0</span><br>
  <button onclick="buildWall()">Construir Parede (5 madeira)</button>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = { x: 400, y: 300, size: 20, speed: 3 };
let walls = [];
let enemies = [];
let wood = 0;
let vida = 100;
let isNight = false;

document.addEventListener("keydown", (e) => {
  if (e.key === "w") player.y -= player.speed;
  if (e.key === "s") player.y += player.speed;
  if (e.key === "a") player.x -= player.speed;
  if (e.key === "d") player.x += player.speed;
});

canvas.addEventListener("click", () => {
  wood++;
  document.getElementById("wood").textContent = wood;
});

function buildWall() {
  if (wood >= 5) {
    wood -= 5;
    walls.push({ x: player.x, y: player.y, size: 30, hp: 50 });
    document.getElementById("wood").textContent = wood;
  }
}

function spawnEnemy() {
  enemies.push({
    x: Math.random() * canvas.width,
    y: 0,
    size: 20,
    speed: 1
  });
}

setInterval(() => {
  isNight = !isNight;
}, 15000);

setInterval(() => {
  if (isNight) spawnEnemy();
}, 2000);

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  canvas.style.background = isNight ? "#111" : "#2e8b57";

  // Player
  ctx.fillStyle = "blue";
  ctx.fillRect(player.x, player.y, player.size, player.size);

  // Walls
  ctx.fillStyle = "brown";
  walls.forEach(w => {
    ctx.fillRect(w.x, w.y, w.size, w.size);
  });

  // Enemies
  ctx.fillStyle = "red";
  enemies.forEach((enemy, i) => {
    enemy.y += enemy.speed;
    ctx.fillRect(enemy.x, enemy.y, enemy.size, enemy.size);

    // Colis√£o com jogador
    if (
      enemy.x < player.x + player.size &&
      enemy.x + enemy.size > player.x &&
      enemy.y < player.y + player.size &&
      enemy.y + enemy.size > player.y
    ) {
      vida -= 1;
      document.getElementById("vida").textContent = vida;
      if (vida <= 0) {
        alert("GAME OVER");
        location.reload();
      }
    }
  });

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
